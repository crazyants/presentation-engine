@using PEngine.Core.Web.Models
@using PEngine.Core.Web
@using PEngine.Core.Web.Helpers

<!DOCTYPE html>
<html>
  <head>
    <base href="/">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@Model.State.FullTitle</title>
    <!-- TODO Add RSS Link Here -->
    @RenderSection("head", required: false)
    @if (Model.State.HasSummary)
    {
    <meta property="og:title" content="@Model.State.SummaryTitle" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="@Model.State.SummaryUrl" />
    <meta property="og:image" content="@Model.State.SummaryImage" />
    <meta property="og:site_name" content="@Model.State.SummarySite" />
    <meta property="og:description" content="@Model.State.SummaryDescription" />
    }
    <link rel="stylesheet" type="text/css" href="@Html.ContentHashFile("styles/pengine.core.css")"> 
    <link rel="stylesheet" type="text/css" href="@Html.ContentHashFile((string)Model.State.ThemePath)"> 
  </head>
  <body>
    <div class="panel" id="pengine-header-component">
      <!-- {{ message }} -->
    </div>
    <div class="page">
      <div class="page-left"></div>
      <div class="header">
        <div class="header-left">
        </div>
        <div class="header-middle">
          @Model.Settings.DefaultTitle
        </div>
        <div class="header-right">
        </div>
      </div>
      <div class="content-menu">
        <div class="menu">
          @foreach (var menuButton in Model.State.TopMenuButtons)
          {
            @Html.Raw(Rendering.MarkupMenuButton(menuButton.Key, menuButton.Value))
          }
          @if (Model.State.SubMenuButtons.Count > 0)
          {
            <div class="menu-separator"></div>
            @foreach (var menuButton in Model.State.SubMenuButtons)
            {
              @Html.Raw(Rendering.MarkupMenuButton(menuButton.Key, menuButton.Value))
            }
          }
        </div>
        <div class="content">
          @RenderBody()
        </div>
      </div>
      <div class="footer">
        <div class="footer-left"></div>
        <div class="footer-middle"></div>
        <div class="footer-right"></div>
      </div>
      <div class="panel">
        <div class="panel-center">
          @if (!Model.Settings.DisableSearch)
          {
          <form method="get" action="/search">
            <span class="buttonrowlabel">Search:</span>
            <input type="text" class="pengine-search-query edit-control-large" name="query" />
            <button type="submit" class="pengine-button-search">Find</button>
          </form>
          }
          @if (!Model.Settings.DisableRSS)
          {
          @Html.Raw("&nbsp;")
          <a href="/feed/rss" class="list-button">[Rss]</a>
          }
          @if (!string.IsNullOrWhiteSpace(Model.Settings.OwnerEmail))
          {
          @Html.Raw("&nbsp;")
          <a href="@Model.Settings.OwnerEmail" class="list-button">[Email]</a>
          }
        </div>
      </div>
      <div class="page-right"></div>
    </div>
    @if(!string.IsNullOrEmpty(Model.State.PEngineUserName))
    {
    <script src="@Html.ContentHashFile("dist/app.bundle.min.js")"></script>
    }
    @RenderSection("scripts", required: false)
  </body>
</html>
